[gd_scene load_steps=15 format=4 uid="uid://4qighc3yxqc4"]

[ext_resource type="PackedScene" uid="uid://78agkknush0k" path="res://ROOMS/SCENE_MANAGEMENT/BaseScene.tscn" id="1_6cabt"]
[ext_resource type="TileSet" uid="uid://qcoif2ljbwxh" path="res://ASSETS/main_tile_set.tres" id="1_m8e51"]
[ext_resource type="PackedScene" uid="uid://blj820gn8deo1" path="res://PLAYER/Player.tscn" id="2_a7ne1"]
[ext_resource type="PackedScene" uid="uid://bsmfk2u2b6fr0" path="res://ROOMS/SCENE_MANAGEMENT/SceneSwitchArea.tscn" id="3_a7ne1"]
[ext_resource type="PackedScene" uid="uid://druwyapeq51bv" path="res://ROOMS/SCENE_MANAGEMENT/CutsceneManager.tscn" id="5_028p6"]
[ext_resource type="Resource" uid="uid://dh0wk22ufu566" path="res://ROOMS/CUTSCENES/OutsideIntro.dialogue" id="6_susxu"]
[ext_resource type="PackedScene" uid="uid://b6oxst7mopyj8" path="res://NPCs/Sam/sam.tscn" id="7_rg6lw"]
[ext_resource type="Script" path="res://ROOMS/metal_detectors.gd" id="8_ejw3m"]
[ext_resource type="Texture2D" uid="uid://burv1yoy1gxtu" path="res://ASSETS/metal_detector.png" id="8_l7uwf"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_6cabt"]
size = Vector2(48.25, 47.25)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_susxu"]
size = Vector2(30, 30)

[sub_resource type="Animation" id="Animation_rg6lw"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Player:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(-7, 359)]
}

[sub_resource type="Animation" id="Animation_susxu"]
resource_name = "IntroCutscene"
length = 2.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Player:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(-7, 359), Vector2(-7, 213)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_rg6lw"]
_data = {
&"RESET": SubResource("Animation_rg6lw"),
&"intro_cutscene": SubResource("Animation_susxu")
}

[node name="Outside" node_paths=PackedStringArray("node_with_locations") instance=ExtResource("1_6cabt")]
node_with_locations = NodePath("StartingLocations")

[node name="StartingLocations" type="Node" parent="." index="0"]

[node name="OutsideDoor" type="Node2D" parent="StartingLocations" index="0"]
position = Vector2(-8, 240)

[node name="OutsideManhole" type="Node2D" parent="StartingLocations" index="1"]
position = Vector2(159, 232)

[node name="TileMapLayer" type="TileMapLayer" parent="." index="1"]
tile_map_data = PackedByteArray("AAD+/w0AAwAMAAUAAAD+/w4AAwANAAYAAAD+/w8AAwANAAYAAAD+/xAAAwANAAYAAAD+/xEAAwANAAYAAAD+/xIAAwANAAYAAAD+/xMAAwANAAYAAAD+/xQAAwANAAYAAAD+/xUAAwANAAYAAAD+/xYAAwANAAYAAAD+/xcAAwANAAYAAAD+/xgAAwANAAYAAAD//w0AAwAMAAUAAAD//w4AAwANAAYAAAD//w8AAwANAAYAAAD//xAAAwANAAYAAAD//xEAAwANAAYAAAD//xIAAwANAAYAAAD//xMAAwANAAYAAAD//xQAAwANAAYAAAD//xUAAwANAAYAAAD//xYAAwANAAYAAAD//xcAAwANAAYAAAD//xgAAwANAAYAAAAAAA0AAwAMAAUAAAAAAA4AAwANAAYAAAAAAA8AAwANAAYAAAAAABAAAwANAAYAAAAAABEAAwANAAYAAAAAABIAAwANAAYAAAAAABMAAwANAAYAAAAAABQAAwANAAYAAAAAABUAAwANAAYAAAAAABYAAwANAAYAAAAAABcAAwANAAYAAAAAABgAAwANAAYAAAD+/wsAAQACABwAAAD+/wwAAQACAB0AAAD//wsAAQADABwAAAD//wwAAQADAB0AAAAAAAsAAQACABwAABAAAAwAAQACAB0AABD9/wwAAwAJAAoAAAD0/wwAAwAIAAoAAAD1/wwAAwAIAAoAAAD2/wwAAwAIAAoAAAD3/wwAAwAIAAoAAAD4/wwAAwAIAAoAAAD5/wwAAwAIAAoAAAD6/wwAAwAIAAoAAAD7/wwAAwAIAAoAAAD8/wwAAwAIAAoAAAABAAwAAwAHAAoAAAACAAwAAwAIAAoAAAADAAwAAwAIAAoAAAAEAAwAAwAIAAoAAAAFAAwAAwAIAAoAAAAGAAwAAwAIAAoAAAAHAAwAAwAIAAoAAAAIAAwAAwAIAAoAAAAJAAwAAwAIAAoAAAAKAAwAAwAIAAoAAAALAAwAAwAIAAoAAAAMAAwAAwAIAAoAAAANAAwAAwAJAAoAAADv/wwAAwAHAAoAAADw/wwAAwAIAAoAAADx/wwAAwAIAAoAAADy/wwAAwAIAAoAAADz/wwAAwAIAAoAAADv/wsAAwAEAAkAAADv/woAAwAEAAkAAADv/wkAAwAEAAkAAADv/wgAAwAEAAkAAADw/wgAAwAFAAkAAADw/wkAAwAFAAkAAADw/woAAwAFAAkAAADw/wsAAwAFAAkAAADx/wgAAwAFAAkAAADx/wkAAwAFAAkAAADx/woAAwAFAAkAAADx/wsAAwAFAAkAAADy/wgAAwAFAAkAAADy/wkAAwAFAAkAAADy/woAAwAFAAkAAADy/wsAAwAFAAkAAADz/wgAAwAFAAkAAADz/wkAAwAFAAkAAADz/woAAwAFAAkAAADz/wsAAwAFAAkAAAD0/wgAAwAFAAkAAAD0/wkAAwAFAAkAAAD0/woAAwAFAAkAAAD0/wsAAwAFAAkAAAD1/wgAAwAFAAkAAAD1/wkAAwAFAAkAAAD1/woAAwAFAAkAAAD1/wsAAwAFAAkAAAD2/wgAAwAFAAkAAAD2/wkAAwAFAAkAAAD2/woAAwAFAAkAAAD2/wsAAwAFAAkAAAD3/wgAAwAFAAkAAAD3/wkAAwAFAAkAAAD3/woAAwAFAAkAAAD3/wsAAwAFAAkAAAD4/wgAAwAFAAkAAAD4/wkAAwAFAAkAAAD4/woAAwAFAAkAAAD4/wsAAwAFAAkAAAD5/wgAAwAFAAkAAAD5/wkAAwAFAAkAAAD5/woAAwAFAAkAAAD5/wsAAwAFAAkAAAD6/wgAAwAFAAkAAAD6/wkAAwAFAAkAAAD6/woAAwAFAAkAAAD6/wsAAwAFAAkAAAD7/wgAAwAFAAkAAAD7/wkAAwAFAAkAAAD7/woAAwAFAAkAAAD7/wsAAwAFAAkAAAD8/wgAAwAFAAkAAAD8/wkAAwAFAAkAAAD8/woAAwAFAAkAAAD8/wsAAwAFAAkAAAD9/wgAAwAFAAkAAAD9/wkAAwAFAAkAAAD9/woAAwAFAAkAAAD9/wsAAwAGAAkAAAD+/wgAAwAFAAkAAAD+/wkAAwAFAAkAAAD+/woAAwAFAAkAAAD//wgAAwAFAAkAAAD//wkAAwAFAAkAAAD//woAAwAFAAkAAAAAAAgAAwAFAAkAAAAAAAkAAwAFAAkAAAAAAAoAAwAFAAkAAAABAAgAAwAFAAkAAAABAAkAAwAFAAkAAAABAAoAAwAFAAkAAAABAAsAAwAEAAkAAAACAAgAAwAFAAkAAAACAAkAAwAFAAkAAAACAAoAAwAFAAkAAAACAAsAAwAFAAkAAAADAAgAAwAFAAkAAAADAAkAAwAFAAkAAAADAAoAAwAFAAkAAAADAAsAAwAFAAkAAAAEAAgAAwAFAAkAAAAEAAkAAwAFAAkAAAAEAAoAAwAFAAkAAAAEAAsAAwAFAAkAAAAFAAgAAwAFAAkAAAAFAAkAAwAFAAkAAAAFAAoAAwAFAAkAAAAFAAsAAwAFAAkAAAAGAAgAAwAFAAkAAAAGAAkAAwAFAAkAAAAGAAoAAwAFAAkAAAAGAAsAAwAFAAkAAAAHAAgAAwAFAAkAAAAHAAkAAwAFAAkAAAAHAAoAAwAFAAkAAAAHAAsAAwAFAAkAAAAIAAgAAwAFAAkAAAAIAAkAAwAFAAkAAAAIAAoAAwAFAAkAAAAIAAsAAwAFAAkAAAAJAAgAAwAFAAkAAAAJAAkAAwAFAAkAAAAJAAoAAwAFAAkAAAAJAAsAAwAFAAkAAAAKAAgAAwAFAAkAAAAKAAkAAwAFAAkAAAAKAAoAAwAFAAkAAAAKAAsAAwAFAAkAAAALAAgAAwAFAAkAAAALAAkAAwAFAAkAAAALAAoAAwAFAAkAAAALAAsAAwAFAAkAAAAMAAgAAwAFAAkAAAAMAAkAAwAFAAkAAAAMAAoAAwAFAAkAAAAMAAsAAwAFAAkAAAANAAgAAwAGAAkAAAANAAkAAwAGAAkAAAANAAoAAwAGAAkAAAANAAsAAwAGAAkAAADv/wcAAwAHAAkAAADw/wcAAwAIAAkAAADx/wcAAwAIAAkAAADy/wcAAwAIAAkAAADz/wcAAwAIAAkAAAD0/wcAAwAIAAkAAAD1/wcAAwAIAAkAAAD2/wcAAwAIAAkAAAD3/wcAAwAIAAkAAAD4/wcAAwAIAAkAAAD5/wcAAwAIAAkAAAD6/wcAAwAIAAkAAAD7/wcAAwAIAAkAAAD8/wcAAwAIAAkAAAD9/wcAAwAIAAkAAAD+/wcAAwAIAAkAAAD//wcAAwAIAAkAAAAAAAcAAwAIAAkAAAABAAcAAwAIAAkAAAACAAcAAwAIAAkAAAADAAcAAwAIAAkAAAAEAAcAAwAIAAkAAAAFAAcAAwAIAAkAAAAGAAcAAwAIAAkAAAAHAAcAAwAIAAkAAAAIAAcAAwAIAAkAAAAJAAcAAwAIAAkAAAAKAAcAAwAIAAkAAAALAAcAAwAIAAkAAAAMAAcAAwAIAAkAAAANAAcAAwAJAAkAAAABAA0AAwAMAAUAAAACAA0AAwAMAAUAAAADAA0AAwAMAAUAAAAEAA0AAwAMAAUAAAAFAA0AAwAMAAUAAAAGAA0AAwAMAAUAAAAHAA0AAwAMAAUAAAAIAA0AAwAMAAUAAAAJAA0AAwAMAAUAAAAKAA0AAwAMAAUAAAALAA0AAwAMAAUAAAAMAA0AAwAMAAUAAAANAA0AAwAMAAUAAADw/w0AAwAMAAUAAADx/w0AAwAMAAUAAADy/w0AAwAMAAUAAADz/w0AAwAMAAUAAAD0/w0AAwAMAAUAAAD1/w0AAwAMAAUAAAD2/w0AAwAMAAUAAAD3/w0AAwAMAAUAAAD4/w0AAwAMAAUAAAD5/w0AAwAMAAUAAAD6/w0AAwAMAAUAAAD7/w0AAwAMAAUAAAD8/w0AAwAMAAUAAAD9/w0AAwAMAAUAAADv/w0AAwAMAAUAAADv/w4AAwAMAAYAAADv/w8AAwAMAAYAAADw/w4AAwAMAAYAAADw/w8AAwAMAAYAAADx/w4AAwAMAAYAAADx/w8AAwAMAAYAAADy/w4AAwAMAAYAAADy/w8AAwAMAAYAAADz/w4AAwAMAAYAAADz/w8AAwAMAAYAAAD0/w4AAwAMAAYAAAD0/w8AAwAMAAYAAAD1/w4AAwAMAAYAAAD1/w8AAwAMAAYAAAD2/w4AAwAMAAYAAAD2/w8AAwAMAAYAAAD3/w4AAwAMAAYAAAD3/w8AAwAMAAYAAAD4/w4AAwAMAAYAAAD4/w8AAwAMAAYAAAD5/w4AAwAMAAYAAAD5/w8AAwAMAAYAAAD6/w4AAwAMAAYAAAD6/w8AAwAMAAYAAAD7/w4AAwAMAAYAAAD7/w8AAwAMAAYAAAD8/w4AAwAMAAYAAAD8/w8AAwAMAAYAAAD9/w4AAwAMAAYAAAD9/w8AAwAMAAYAAAABAA4AAwAMAAYAAAABAA8AAwAMAAYAAAACAA4AAwAMAAYAAAACAA8AAwAMAAYAAAADAA4AAwAMAAYAAAADAA8AAwAMAAYAAAAEAA4AAwAMAAYAAAAEAA8AAwAMAAYAAAAFAA4AAwAMAAYAAAAFAA8AAwAMAAYAAAAGAA4AAwAMAAYAAAAGAA8AAwAMAAYAAAAHAA4AAwAMAAYAAAAHAA8AAwAMAAYAAAAIAA4AAwAMAAYAAAAIAA8AAwAMAAYAAAAJAA4AAwAMAAYAAAAJAA8AAwAMAAYAAAAKAA4AAwAMAAYAAAAKAA8AAwAMAAYAAAALAA4AAwAMAAYAAAALAA8AAwAMAAYAAAAMAA4AAwAMAAYAAAAMAA8AAwAMAAYAAAANAA4AAwAMAAYAAAANAA8AAwAMAAYAAAA=")
tile_set = ExtResource("1_m8e51")

[node name="barriers" type="TileMapLayer" parent="." index="2"]
visible = false
tile_map_data = PackedByteArray("AAD+/xkAAwABAAUAAAD//xkAAwABAAUAAAAAABkAAwABAAUAAAABABgAAwABAAUAAAABABcAAwABAAUAAAABABYAAwABAAUAAAABABUAAwABAAUAAAABABIAAwABAAUAAAABABEAAwABAAUAAAABABAAAwABAAUAAAD9/xUAAwABAAUAAAD9/xcAAwABAAUAAAD9/xQAAwABAAUAAAD9/xgAAwABAAUAAAD9/xYAAwABAAUAAAD9/xMAAwABAAUAAAD9/xIAAwABAAUAAAD9/xEAAwABAAUAAAD9/xAAAwABAAUAAAD8/xAAAwABAAUAAAD7/xAAAwABAAUAAAD6/xAAAwABAAUAAAD5/xAAAwABAAUAAAD4/xAAAwABAAUAAAD3/xAAAwABAAUAAAD2/xAAAwABAAUAAAD1/xAAAwABAAUAAAD0/xAAAwABAAUAAADz/xAAAwABAAUAAADy/xAAAwABAAUAAADx/xAAAwABAAUAAADw/xAAAwABAAUAAADv/xAAAwABAAUAAADu/w8AAwABAAUAAADu/w4AAwABAAUAAADu/w0AAwABAAUAAAABABkAAwABAAUAAAD9/xkAAwABAAUAAADu/xAAAwABAAUAAAABABQAAwABAAUAAAABABMAAwABAAUAAAACABAAAwABAAUAAAADABAAAwABAAUAAAAEABAAAwABAAUAAAAFABAAAwABAAUAAAAGABAAAwABAAUAAAAHABAAAwABAAUAAAAIABAAAwABAAUAAAAJABAAAwABAAUAAAAKABAAAwABAAUAAAALABAAAwABAAUAAAAMABAAAwABAAUAAAANABAAAwABAAUAAAAOABAAAwABAAUAAAAOAA8AAwABAAUAAAAOAA4AAwABAAUAAAAOAA0AAwABAAUAAAAOAAwAAwABAAUAAADu/wwAAwABAAUAAAA=")
tile_set = ExtResource("1_m8e51")

[node name="manhole1" type="TileMapLayer" parent="." index="3"]
tile_map_data = PackedByteArray("AAAMAA4AAwAMAAAAAAALAA0AAwAMAAAAAAALAA4AAwAMAAAAAAALAA8AAwAMAAAAAAAMAA8AAwAMAAAAAAANAA8AAwAMAAAAAAANAA4AAwAMAAAAAAANAA0AAwAMAAAAAAAMAA0AAwAMAAAAAAA=")
tile_set = ExtResource("1_m8e51")

[node name="manhole2" type="TileMapLayer" parent="." index="4"]
tile_map_data = PackedByteArray("AAAMAA4ABAAGAAAAAAA=")
tile_set = ExtResource("1_m8e51")

[node name="decor" type="TileMapLayer" parent="." index="5"]
tile_map_data = PackedByteArray("AAD8/wwAAQAKAC0AAAD8/w0AAQAKAC4AAAACAAwAAQALAC0AAAABAAsAAQAKACwAAAD8/wsAAQAKACwAAAD9/wsAAQALACwAAAD9/wwAAQALAC0AAAD9/w0AAQALAC4AAAABAAwAAQAKAC0AAAABAA0AAQAKAC4AAAACAAsAAQALACwAAAACAA0AAQALAC4AAAD3/wsAAQAKACwAAAD3/wwAAQAKAC0AAAD3/w0AAQAKAC4AAAD4/wsAAQALACwAAAD4/wwAAQALAC0AAAD4/w0AAQALAC4AAAAGAAsAAQAKACwAAAAGAAwAAQAKAC0AAAAGAA0AAQAKAC4AAAAHAAsAAQALACwAAAAHAAwAAQALAC0AAAAHAA0AAQALAC4AAAALAAsAAQAKACwAAAALAAwAAQAKAC0AAAALAA0AAQAKAC4AAAAMAAsAAQALACwAAAAMAAwAAQALAC0AAAAMAA0AAQALAC4AAADy/wsAAQAKACwAAADy/wwAAQAKAC0AAADy/w0AAQAKAC4AAADz/wsAAQALACwAAADz/wwAAQALAC0AAADz/w0AAQALAC4AAAAEAA0AAQAMAC4AAAAJAAwAAQAMAC0AAAAJAA0AAQAMAC4AAAD6/wwAAQAMAC0AAAD6/w0AAQAMAC4AAAD1/wwAAQAMAC0AAAD1/w0AAQAMAC4AAADw/wwAAQAMAC0AAADw/w0AAQAMAC4AAADw/w8AAQAHAEAAAADx/w8AAQAIAEAAAADv/w4AAQAHADgAAADv/w8AAQAHADkAAADx/w4AAQAAADQAAAADAAsAAQAJABwAAAADAAwAAQAJAB0AAAAFAAsAAQAJABwAAAAFAAwAAQAJAB0AAAAIAAsAAQAJABwAAAAIAAwAAQAJAB0AAAAKAAsAAQAJABwAAAAKAAwAAQAJAB0AAAANAAsAAQAJABwAAAANAAwAAQAJAB0AAAD7/wsAAQAJABwAAAD7/wwAAQAJAB0AAAD5/wsAAQAJABwAAAD5/wwAAQAJAB0AAAD2/wsAAQAJABwAAAD2/wwAAQAJAB0AAAD0/wsAAQAJABwAAAD0/wwAAQAJAB0AAADx/wsAAQAJABwAAADx/wwAAQAJAB0AAADv/wsAAQAJABwAAADv/wwAAQAJAB0AAAAEAAwAAQAMAC0AAAD//woAAQAPAAcAAAD//wsAAQAPAAgAAAAAAAoAAQAPAAUAAAAAAAsAAQAPAAYAAAD+/woAAQAPAAMAAAD+/wsAAQAPAAQAAAA=")
tile_set = ExtResource("1_m8e51")

[node name="Player" parent="." index="6" instance=ExtResource("2_a7ne1")]
position = Vector2(-7, 359)

[node name="SceneSwitchArea" parent="." index="7" instance=ExtResource("3_a7ne1")]
position = Vector2(-3, 256)
starting_location = "MainDoor"
to_scene = "res://ROOMS/Entrance.tscn"

[node name="CollisionShape2D" type="CollisionShape2D" parent="SceneSwitchArea" index="0"]
position = Vector2(-5.125, -56)
shape = SubResource("RectangleShape2D_6cabt")

[node name="ColorRect" type="ColorRect" parent="SceneSwitchArea" index="1"]
visible = false
offset_left = -29.0
offset_top = -79.0
offset_right = 19.0
offset_bottom = -32.0
color = Color(0, 1, 1, 1)

[node name="SSA_Sewers" parent="." index="8" instance=ExtResource("3_a7ne1")]
position = Vector2(200, 232)
starting_location = "ManholeExit"
to_scene = "res://ROOMS/SEWERS/sewer_entrance.tscn"

[node name="CollisionShape2D" type="CollisionShape2D" parent="SSA_Sewers" index="0"]
shape = SubResource("RectangleShape2D_susxu")

[node name="ColorRect" type="ColorRect" parent="SSA_Sewers" index="1"]
visible = false
offset_left = -29.0
offset_top = -79.0
offset_right = 19.0
offset_bottom = -32.0
color = Color(0, 1, 1, 1)

[node name="ColorRect" parent="Background" index="0"]
offset_left = -2773.0
offset_top = -2249.0
offset_right = -2733.0
offset_bottom = -2209.0

[node name="CutsceneManager" parent="." index="11" instance=ExtResource("5_028p6")]
dialogue_resource = ExtResource("6_susxu")
enabled = true

[node name="CutscenePlayer" type="AnimationPlayer" parent="." index="12"]
unique_name_in_owner = true
libraries = {
&"": SubResource("AnimationLibrary_rg6lw")
}

[node name="Sam" parent="." index="13" instance=ExtResource("7_rg6lw")]
position = Vector2(-117, 223)
autoplay = "adam"
frame_progress = 0.0
anim = "adam"

[node name="MetalDetectors" type="Node2D" parent="." index="14"]
script = ExtResource("8_ejw3m")

[node name="MetalDetector" type="Sprite2D" parent="MetalDetectors" index="0"]
position = Vector2(-37, 199)
texture = ExtResource("8_l7uwf")
region_enabled = true
region_rect = Rect2(0, 0, 16, 32)

[node name="MetalDetector2" type="Sprite2D" parent="MetalDetectors" index="1"]
position = Vector2(20, 199)
texture = ExtResource("8_l7uwf")
region_enabled = true
region_rect = Rect2(16, 0, 16, 32)
